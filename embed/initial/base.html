<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }} - {{ .User.Config.Title }}</title>

    {{ if .User.FaviconUrl }}
    <link rel="icon" href="{{ .User.FaviconUrl }}">
    {{ else }}
    <link rel="icon" href="data:,">
    {{ end }}

    <meta property="og:title" content="{{ .Title }}" />
    {{ if .Description }}
    <meta name="description" content="{{ .Description }}">
    <meta property="og:description" content="{{ .Description }}" />
    {{ end }}
    {{ if .Type }}
    <meta property="og:type" content="{{ .Type }}" />
    {{ end }}
    {{ if .SelfUrl }}
    <meta property="og:url" content="{{ .SelfUrl }}" />
    {{ end }}

    <link rel="stylesheet" href="/static/pico.min.css">
    <link rel="webmention" href="{{ .User.WebmentionUrl }}">
    {{ if .User.AuthUrl }}
    <link rel="indieauth-metadata" href="{{ .User.IndieauthMetadataUrl }}">
    <link rel="authorization_endpoint" href="{{ .User.AuthUrl}}">
    <link rel="token_endpoint" href="{{ .User.TokenUrl}}">
    <link rel="micropub" href="{{ .User.MicropubUrl}}">
    {{ end }}
    <style>
        header {
            background-color: {{.User.Config.HeaderColor}};
            padding-bottom: 1rem !important;
        }

        footer {
            border-top: dashed 2px;
            border-color: #ccc;
        }

        .avatar {
            float: left;
            margin-right: 1rem;

        }

        .header {
            display: flex;
            flex-flow: row wrap;
            justify-content: space-between;
            align-items: flex-start;
        }

        .header-title {
            order: 0;
        }

        .header-profile {
            order: 1;
        }

        hgroup h2 a { color: inherit; } 
    
        .photo-grid {
            display: flex;
            flex-wrap: wrap;
            padding: 0 4px;
        }

        .photo-grid-item {
            flex: 1 0 25%;
            padding: 4px;
        }

        .photo-grid-item img {
            width: 100%;
            height: 100%;
            aspect-ratio: 1 / 1 ;
            object-fit: cover;
        }

    </style>
</head>

<body>
    <header>
        <div class="container header h-card">
            <hgroup class="header-title">
                <h2><a class="p-name u-url" href="{{ .User.UrlPath }}">{{ .User.Config.Title }}</a></h2>
                <h3 class="p-note">{{ .User.Config.SubTitle }}</h3>
            </hgroup>

            <div class="header-profile">
                {{ if .User.AvatarUrl }}
                    <img class="u-photo u-logo avatar" src="{{ .User.AvatarUrl }}" alt="{{ .User.Config.Title }}" width="100" height="100" />
                {{ end }}
                <div style="float: right; list-style: none;">
                {{ range $me := .User.Config.Me }}
                    <li><a href="{{$me.Url}}" rel="me">{{$me.Name}}</a>
                    </li>
                {{ end }}
                </div>
            </div>
        </div>
        <div class="container">
            <nav>
                <ul>
                    {{ range $link := .User.Config.HeaderMenu }}
                        {{ if $link.List }}
                            <li><a href="{{ listUrl $.User $link.List }}">{{ $link.Title }}</a></li>
                        {{ else if $link.Post }}
                            <li><a href="{{ postUrl $.User $link.Post }}">{{ $link.Title }}</a></li>
                        {{ else }}
                            <li><a href="{{ $link.Url }}">{{ $link.Title }}</a></li>
                        {{ end }}
                    {{ end }}
                </ul>
            </nav>
        </div>
    </header>
        {{ .Content }}
    </main>
    <footer class="container">
        <nav>
            <ul>
                {{ range $link := .User.Config.FooterMenu }}
                {{ if $link.List }}
                <li><a href="{{ listUrl $.User $link.List }}">{{ $link.Title }}</a></li>
                {{ else if $link.Post }}
                <li><a href="{{ postUrl $.User $link.Post }}">{{ $link.Title }}</a></li>
                {{ else }}
                <li><a href="{{ $link.Url }}">{{ $link.Title }}</a></li>
                {{ end }}
                {{ end }}
            </ul>
        </nav>
    </footer>
</body>

</html>
